# 常见面试题汇总

## JavaScript部分

JS中的异步: https://www.bilibili.com/video/BV15J411G7FG/?spm_id_from=333.999.0.0



### WebSocket



## Vue框架

### 1 组件间传值

原则上,组件间的值流向应该是自上而下的

1. 父传子: props直接传,父组件传给子组件,子组件用props接收
2. 子传父: 父传给子一个回调函数,子props接收到回调函数后,调用回调函数传值
3. 自定义事件: 数据接受方用on绑定事件,数据传递方emit触发事件进行传值
4. 全局事件总线: Vue入口文件中beforeCreated钩子里,`Vue.prototype.$bus=this`安装全局事件总线,接受方on绑定事件,传递方emit触发事件
5. pubsub: npm安装pubsub-js,接收方subscribe订阅消息,传递方publish发布消息
6. Vue3中祖先组件给后代组件传值: 利用provide方法传值,子组件用inject方法拿到值
7. 父组件直接传给子组件,不用props接收,子组件中在$attr中拿到数据(旁门左道)
8. 利用VueRouter传值,用params或者query传值,route.query或者route.params拿到值(旁门左道)
9. 利用作用域插槽传值scope="xxx"传值,子在子组件中,父组件拿到子组件中的值(旁门左道)
10. 利用H5中data-xxx传值,子组件dom.dataset.xxx拿到值(旁门左道)
11. Vuex操作全局状态也可以传值(旁门左道)
12. 利用localStorage或者SessionStorage传值(旁门左道)

### 2 watch和computed的区别

1. 功能：computed是计算属性，watch是监听一个值的变化，然后执行对应的回调
2. 缓存：computed中的函数所依赖的属性没有发生变化，那么调用当前的函数的时候会从缓存中读取，而watch在每次监听的值发生变化的时候都会执行回调
3. 异步: computed不能中不能调用异步方法,而watch可以
4. 调用return：computed中的getter必须要用return返回，watch中的函数不是必须要用return
5. 首次执行: computed默认第一次加载的时候就开始监听；watch默认第一次加载不做监听，如果需要第一次加载做监听，添加immediate属性，设置为true（immediate:true）
6. 使用场景：computed----当一个属性受多个属性影响的时候，使用computed-----购物车商品结算。watch–当一条数据影响多条数据的时候，使用watch-----搜索框.

### 3 自定义指令

全局自定义指令,在App.vue中写,`Vue.drectvie(name,{指令对象})`

全局指令：

```html
<script>
    // 注册一个全局自定义指令 `v-focus`
    Vue.directive('focus', {
        // 当被绑定的元素插入到 DOM 中时……
        inserted: function (el) {
            // 聚焦元素
            el.focus()
        }
    })
</script>
```

局部指令在组件中directives里写

局部指令：

```js
directives: {
  focus: {
    // 指令的定义
    inserted: function (el) {
      el.focus()
    }
  }
}
```

配置对象中常用的3个钩子回调, 包含2个参数(element, binding)：

* bind：指令与元素成功绑定时调用
* inserted：指令所在元素被插入页面时调用
* update：指令所在模板结构被重新解析时调用
* element: 是自定义指令的DOM节点
* binding: 绑定相关信息的封装
